package com.nus.sec.service;

import java.util.Date;
import java.util.List;
import java.util.Optional;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.nus.base.service.UserLoginBaseService;
import com.nus.sec.entities.ApexGroup;
import com.nus.sec.model.ApexGroupModel;
import com.nus.sec.repo.ApexGroupRepository;

/**
 * @Author: SanjeevKumar<br>
 * @Date: 13-Jan-2025<br>
 * @Time: 4:21:39 pm<br>
 * @Objective: <br>
 */
@Service
public class ApexGroupServiceImpl extends UserLoginBaseService implements ApexGroupService{

	@Autowired
	ApexGroupRepository apexGroupRepository;

	@Override
	public ApexGroup addApexGroup(ApexGroupModel apexGroupModel) {
		ApexGroup savedApexGroupEntity = null;
		try {
			ApexGroup apexGroupEntity = new ApexGroup();
			apexGroupEntity.setGroupName(apexGroupModel.getGroupName());
			apexGroupEntity.setCreatedOn(new Date());
			// apexGroupEntity.setCreatedBy(0);//Will be implemented latter. FK needs to be adjusted
			apexGroupEntity.setActiveC("Y");
			savedApexGroupEntity = apexGroupRepository.save(apexGroupEntity);
		} catch (Exception ex) {
			ex.printStackTrace();
		}
		return savedApexGroupEntity;

	}

	@Override
	public ApexGroup updateApexGroup(ApexGroupModel apexGroupModel) {
		ApexGroup apexGroupEntityToBeUpdated = null;
		try {			
			Optional<ApexGroup> apiGroupEntityWrapper = apexGroupRepository.findById(apexGroupModel.getId());
			if (apiGroupEntityWrapper.isPresent()) {
				apexGroupEntityToBeUpdated = apiGroupEntityWrapper.get();
				apexGroupEntityToBeUpdated.setGroupName(apexGroupModel.getGroupName());
				apexGroupEntityToBeUpdated.setModifiedOn(new Date());
				// apiGroupEntityToBeUpdated.setModifiedBy(0);//Will be implemented latter. FK needs to be adjusted
				apexGroupEntityToBeUpdated.setActiveC(apexGroupModel.getActiveC());
				apexGroupRepository.save(apexGroupEntityToBeUpdated);
			}
		} catch (Exception ex) {
			ex.printStackTrace();
		}
		return apexGroupEntityToBeUpdated;

	}

	@Override
	public boolean deleteApexGroupByRecordId(Integer recordId) {
		boolean isRecordDeleted = true;
		try {
			apexGroupRepository.deleteById(recordId);
		} catch (Exception ex) {
			ex.printStackTrace();
			isRecordDeleted = false;
		}
		return isRecordDeleted;
	}

	@Override
	public ApexGroup getApexGroupByRecordId(Integer recordId) {
		ApexGroup apexGroupEntityFetched = null;
		try {
			Optional<ApexGroup> apexGroupEntityWrapper = apexGroupRepository.findById(recordId);
			if (apexGroupEntityWrapper.isPresent())
				apexGroupEntityFetched = apexGroupEntityWrapper.get();
		} catch (Exception ex) {
			ex.printStackTrace();
		}
		return apexGroupEntityFetched;

	}

	@Override
	public List<ApexGroup> getAllApexGroups() {
		List<ApexGroup> apexGroupList = null;
		try {
			apexGroupList = apexGroupRepository.findAll();
		} catch (Exception ex) {
			ex.printStackTrace();
		}
		return apexGroupList;

	}
}// End of ApexGroupServiceImpl

